#!/usr/bin/env ruby

require 'rubygems'
require "#{File.dirname(__FILE__)}/../lib/codezfeeder"

CodezFeeder.setup! unless CodezFeeder.setup?

case ARGV.first

when nil, "serve"
  CodezFeeder.serve_web!
  CodezFeeder.serve_git!
  CodezFeeder.advertise!
  Process.wait

when "add"
  CodezFeeder.add!(ARGV[1])

when "help", "--help", "-h"
  puts <<-HELP
Usage: #{$0} [<command>]

Commands:
  none       - Start the web, git and bonjour serving
  add [name] - Adds the current directory as a new project.
HELP
else
  raise "Don't understand"
end
